<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>‚öΩ Skill Rating Calculator</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f1923 0%, #1a2a3a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px;
            max-width: 520px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 8px;
            color: #fff;
        }
        .subtitle {
            text-align: center;
            color: #888;
            font-size: 13px;
            margin-bottom: 30px;
        }
        .field { margin-bottom: 20px; }
        label {
            display: block;
            font-size: 13px;
            color: #aaa;
            margin-bottom: 6px;
            font-weight: 500;
        }
        input, select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }
        input:focus, select:focus { border-color: #4fc3f7; }
        input::placeholder { color: #555; }
                        select option {
            background: #fff;
            color: #000;
                                    }
        .inline-label {
            font-size: 12px;
            color: #777;
            margin-top: 2px;
        }
        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #4fc3f7, #2196f3);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: transform 0.1s, box-shadow 0.2s;
        }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(33,150,243,0.4); }
        .btn:active { transform: translateY(0); }
        .result-box {
            margin-top: 25px;
            background: rgba(76,175,80,0.1);
            border: 1px solid rgba(76,175,80,0.3);
            border-radius: 14px;
            padding: 24px;
            text-align: center;
            display: none;
        }
        .result-box.show { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .skill-number {
            font-size: 64px;
            font-weight: 800;
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }
        .skill-label { font-size: 14px; color: #aaa; margin-top: 4px; }
        .details {
            margin-top: 16px;
            font-size: 12px;
            color: #777;
            line-height: 1.8;
            text-align: left;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px 16px;
        }
        .details span { color: #bbb; }
        .formula-note {
            margin-top: 20px;
            font-size: 11px;
            color: #555;
            text-align: center;
            line-height: 1.5;
        }
        .quick-examples {
            margin-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.08);
            padding-top: 16px;
        }
        .quick-examples h3 { font-size: 13px; color: #888; margin-bottom: 10px; }
        .example-btn {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #aaa;
            font-size: 12px;
            cursor: pointer;
            margin: 3px;
            transition: background 0.2s;
        }
        .example-btn:hover { background: rgba(255,255,255,0.12); color: #fff; }
    </style>
</head>
<body>
<div class="container">
    <h1>‚öΩ Skill Rating Calculator</h1>
    <p class="subtitle">–°—Ç–æ–∏–º–æ—Å—Ç—å Transfermarkt ‚Üí Skill (50‚Äì99)</p>

    <div class="field">
        <label>üí∞ –†—ã–Ω–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (–≤ –º–∏–ª–ª–∏–æ–Ω–∞—Ö ‚Ç¨)</label>
        <input type="number" id="mvM" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 50 (–∑–∞ ‚Ç¨50M)" step="0.1" min="0">
        <div class="inline-label">–ü—Ä–∏–º–µ—Ä—ã: 180 = ‚Ç¨180M, 3 = ‚Ç¨3M, 0.8 = ‚Ç¨0.8M</div>
    </div>

    <div class="field">
        <label>üéÇ –í–æ–∑—Ä–∞—Å—Ç</label>
        <input type="number" id="age" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25" min="16" max="42">
    </div>

    <div class="field">
        <label>üèüÔ∏è –£—Ä–æ–≤–µ–Ω—å –ª–∏–≥–∏</label>
        <select id="tier">
            <option value="1">–¢–æ–ø-5 (EPL, La Liga, Bundesliga, Serie A, Ligue 1)</option>
            <option value="2">–≠—Ä–µ–¥–∏–≤–∏–∑–∏, –õ–∏–≥–∞ –ü–æ—Ä—Ç—É–≥–∞–ª–∏–∏, –ë–µ–ª—å–≥–∏—è –∏ —Ç.–ø.</option>
            <option value="3">–†–ü–õ, –°—É–ø–µ—Ä–ª–∏–≥–∞ –¢—É—Ä—Ü–∏–∏, MLS –∏ —Ç.–ø.</option>
            <option value="4">–ú–∞–ª—ã–µ –ª–∏–≥–∏</option>
        </select>
    </div>

    <button class="btn" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å Skill ‚ö°</button>

    <div class="result-box" id="result">
        <div class="skill-number" id="skillValue">--</div>
        <div class="skill-label">SKILL RATING</div>
        <div class="details" id="details"></div>
    </div>

    <div class="quick-examples">
        <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã:</h3>
        <span class="example-btn" onclick="fillExample(180, 25, 1)">–ú–±–∞–ø–ø–µ (180M, 25)</span>
        <span class="example-btn" onclick="fillExample(150, 21, 1)">–ë–µ–ª–ª–∏–Ω–≥–µ–º (150M, 21)</span>
        <span class="example-btn" onclick="fillExample(5, 38, 1)">–ú–æ–¥—Ä–∏—á (5M, 38)</span>
        <span class="example-btn" onclick="fillExample(3, 26, 3)">–ò–≥—Ä–æ–∫ –†–ü–õ (3M, 26)</span>
        <span class="example-btn" onclick="fillExample(30, 30, 1)">–í–µ—Ç–µ—Ä–∞–Ω (30M, 30)</span>
        <span class="example-btn" onclick="fillExample(0.8, 22, 4)">–ú–æ–ª–æ–¥–æ–π (0.8M, 22)</span>
    </div>

    <p class="formula-note">
        –§–æ—Ä–º—É–ª–∞: Skill = (ln(MV) ‚àí ln(f(age)) ‚àí ln(g) ‚àí 0.77) / 0.203<br>
        MV = –º–∏–ª–ª–∏–æ–Ω—ã ‚Ç¨ √ó 1 000 000 | –ü–∏–∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏: 26 –ª–µ—Ç
    </p>
</div>

<script>
const PEAK_AGE = 26.0;
const ALPHA = 0.2030;
const C = 0.77;
const LEAGUE_MULT = {1: 1.0, 2: 0.65, 3: 0.45, 4: 0.25};

function fAge(age) {
    const x = age - PEAK_AGE;
    if (age <= PEAK_AGE) {
        let base = 1.0 - 0.006 * x * x;
        let premium = age <= 21 ? 0.02 * Math.max(0, 21 - age) : 0;
        return Math.min(base + premium, 1.0);
    } else {
        return Math.max(Math.exp(-0.065 * Math.pow(x, 1.55)), 0.02);
    }
}

function calcSkill(mvEur, age, tier) {
    const g = LEAGUE_MULT[tier] || 1.0;
    const fa = fAge(age);
    let skill = (Math.log(mvEur) - Math.log(fa) - Math.log(g) - C) / ALPHA;
    return Math.min(Math.max(Math.round(skill * 10) / 10, 40), 99);
}

function getSkillColor(skill) {
    if (skill >= 90) return '#4caf50';
    if (skill >= 80) return '#8bc34a';
    if (skill >= 70) return '#ffc107';
    return '#ff9800';
}

function getSkillLabel(skill) {
    if (skill >= 90) return '–ú–∏—Ä–æ–≤–æ–π –∫–ª–∞—Å—Å üåü';
    if (skill >= 85) return '–≠–ª–∏—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å üíé';
    if (skill >= 80) return '–û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π üî•';
    if (skill >= 75) return '–ö—Ä–µ–ø–∫–∏–π –ø—Ä–æ—Ñ–∏ ‚ö°';
    if (skill >= 70) return '–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å';
    if (skill >= 65) return '–ù–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ';
    return '–ù–∞—á–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
}

function calculate() {
    const mvM = parseFloat(document.getElementById('mvM').value);
    const age = parseInt(document.getElementById('age').value);
    const tier = parseInt(document.getElementById('tier').value);

    if (!mvM || mvM <= 0 || !age || age < 16 || age > 42) {
        alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å (–≤ –º–ª–Ω ‚Ç¨) –∏ –≤–æ–∑—Ä–∞—Å—Ç (16‚Äì42).');
        return;
    }

    const mvEur = mvM * 1_000_000;
    const skill = calcSkill(mvEur, age, tier);
    const fa = fAge(age);
    const g = LEAGUE_MULT[tier];

    const skillEl = document.getElementById('skillValue');
    skillEl.textContent = skill.toFixed(1);
    skillEl.style.background = `linear-gradient(135deg, ${getSkillColor(skill)}, ${getSkillColor(skill-10)})`;
    skillEl.style['-webkit-background-clip'] = 'text';

    document.getElementById('details').innerHTML =
        `<span>üìä –°—Ç–æ–∏–º–æ—Å—Ç—å:</span> ‚Ç¨${mvM.toFixed(2)}M<br>` +
        `<span>üéÇ –í–æ–∑—Ä–∞—Å—Ç:</span> ${age} –ª–µ—Ç<br>` +
        `<span>üìà f(age):</span> ${fa.toFixed(4)} (–ø–∏–∫=1.0 –ø—Ä–∏ 26)<br>` +
        `<span>üèüÔ∏è g(league):</span> ${g}<br>` +
        `<span>üéØ –£—Ä–æ–≤–µ–Ω—å:</span> ${getSkillLabel(skill)}`;

    const box = document.getElementById('result');
    box.classList.remove('show');
    void box.offsetWidth;
    box.classList.add('show');
}

function fillExample(mvM, age, tier) {
    document.getElementById('mvM').value = mvM;
    document.getElementById('age').value = age;
    document.getElementById('tier').value = tier;
    calculate();
}

document.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') calculate();
});
</script>
</body>
</html>
